
running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 25 filtered out


running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out


running 1 test
test redis_int_tests::basic_driver_tests::test_cluster_auth_redis ... [2mSep 24 16:56:10.929[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(18446744073709551615); interests=Readable    
[2mSep 24 16:56:10.929[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:10.930[0m [32m INFO[0m lib::redis_int_tests::support: attempt 1
[2mSep 24 16:56:10.932[0m [32m INFO[0m shotover_proxy::config::topology: Loaded topics ["testtopic"]
[2mSep 24 16:56:10.933[0m [32m INFO[0m shotover_proxy::config::topology: Loaded chains ["redis_chain"]
[2mSep 24 16:56:10.933[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:10.933[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(0); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:10.933[0m [32m INFO[0m shotover_proxy::sources::redis_source: Starting Redis source on [127.0.0.1:6379]
[2mSep 24 16:56:10.933[0m [32m INFO[0m shotover_proxy::config::topology: Loaded sources [["redis_prod"]] and linked to chains
[2mSep 24 16:56:10.933[0m [32m INFO[0m shotover_proxy::server: accepting inbound connections
[2mSep 24 16:56:10.934[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:10.934[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(1); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:11.034[0m [32m INFO[0m lib::redis_int_tests::support: attempt 2
[2mSep 24 16:56:11.039[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:11.039[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(2); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:11.039[0m [32m INFO[0m shotover_proxy::server: New connection from 127.0.0.1:57779
[2mSep 24 16:56:11.040[0m [35mTRACE[0m shotover_proxy::server: Waiting for message
[2mSep 24 16:56:11.067[0m [35mTRACE[0m tokio_util::codec::framed_read: attempting to decode a frame    
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: remaining 28
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: Got frame Array([BulkString([65, 85, 84, 72]), BulkString([115, 104, 111, 116, 111, 118, 101, 114])])
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: frames [Array([BulkString([65, 85, 84, 72]), BulkString([115, 104, 111, 116, 111, 118, 101, 114])])] - remaining 0
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: Batch size 1
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: processing bulk response [Array([BulkString([65, 85, 84, 72]), BulkString([115, 104, 111, 116, 111, 118, 101, 114])])]
[2mSep 24 16:56:11.068[0m [35mTRACE[0m tokio_util::codec::framed_read: frame decoded from buffer    
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::server: Received raw message Messages { messages: [Message { details: Query(QueryMessage { query_string: "AUTH shotover", namespace: [], primary_key: {}, query_values: Some({}), projection: None, query_type: Write, ast: Some(Commands(List([Bytes(b"AUTH"), Bytes(b"shotover")]))) }), modified: false, original: Redis(Array([BulkString([65, 85, 84, 72]), BulkString([115, 104, 111, 116, 111, 118, 101, 114])])) }] }
[2mSep 24 16:56:11.068[0m [35mTRACE[0m shotover_proxy::transforms::redis_transforms::redis_cluster: command=AUTH connection=ConnectionDetails { first_contact_points: ["redis://127.0.0.1:2230/", "redis://127.0.0.1:2231/", "redis://127.0.0.1:2232/", "redis://127.0.0.1:2233/", "redis://127.0.0.1:2234/", "redis://127.0.0.1:2235/"], password: None, username: None }
[2mSep 24 16:56:11.069[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:11.069[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(3); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:11.099[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:11.099[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(4); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:11.119[0m [35mTRACE[0m mio::poll: deregistering handle with poller    
[2mSep 24 16:56:11.119[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:11.120[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(34359738372); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:12.147[0m [35mTRACE[0m mio::poll: deregistering handle with poller    
[2mSep 24 16:56:12.148[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:12.148[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(68719476740); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:13.171[0m [35mTRACE[0m mio::poll: deregistering handle with poller    
[2mSep 24 16:56:13.171[0m [35mTRACE[0m mio::poll: deregistering handle with poller    
[2mSep 24 16:56:13.171[0m [35mTRACE[0m shotover_proxy::transforms::redis_transforms::redis_cluster: connection=ClusterConnection { initial_nodes: [ConnectionInfo { addr: Tcp("127.0.0.1", 2230), db: 0, username: None, passwd: None }, ConnectionInfo { addr: Tcp("127.0.0.1", 2231), db: 0, username: None, passwd: None }, ConnectionInfo { addr: Tcp("127.0.0.1", 2232), db: 0, username: None, passwd: None }, ConnectionInfo { addr: Tcp("127.0.0.1", 2233), db: 0, username: None, passwd: None }, ConnectionInfo { addr: Tcp("127.0.0.1", 2234), db: 0, username: None, passwd: None }, ConnectionInfo { addr: Tcp("127.0.0.1", 2235), db: 0, username: None, passwd: None }], connections: Mutex { s: Semaphore { permits: 2 }, c: UnsafeCell }, slots: Mutex { s: Semaphore { permits: 2 }, c: UnsafeCell }, auto_reconnect: true, readonly: false, password: Some("shotover"), username: None, rng: SmallRng(Mcg128Xsl64 {}) }
[2mSep 24 16:56:13.171[0m [35mTRACE[0m redis_protocol::utils: allocating more, len: 0, amt: 5    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m tokio_util::codec::framed_write: flushing framed transport    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m tokio_util::codec::framed_write: writing; remaining=5    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m tokio_util::codec::framed_write: framed transport flushed    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::server: Waiting for message
[2mSep 24 16:56:13.172[0m [35mTRACE[0m tokio_util::codec::framed_read: attempting to decode a frame    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: frames [] - remaining 0
[2mSep 24 16:56:13.172[0m [35mTRACE[0m tokio_util::codec::framed_read: attempting to decode a frame    
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: remaining 39
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: Got frame Array([BulkString([71, 69, 84]), BulkString([110, 111, 115, 100, 106, 107, 103, 104, 115, 100, 106, 103, 104, 115, 100, 107, 103, 104, 106])])
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: frames [Array([BulkString([71, 69, 84]), BulkString([110, 111, 115, 100, 106, 107, 103, 104, 115, 100, 106, 103, 104, 115, 100, 107, 103, 104, 106])])] - remaining 0
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: Batch size 1
[2mSep 24 16:56:13.172[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: processing bulk response [Array([BulkString([71, 69, 84]), BulkString([110, 111, 115, 100, 106, 107, 103, 104, 115, 100, 106, 103, 104, 115, 100, 107, 103, 104, 106])])]
[2mSep 24 16:56:13.173[0m [35mTRACE[0m tokio_util::codec::framed_read: frame decoded from buffer    
[2mSep 24 16:56:13.173[0m [35mTRACE[0m shotover_proxy::server: Received raw message Messages { messages: [Message { details: Query(QueryMessage { query_string: "GET nosdjkghsdjghsdkghj", namespace: [], primary_key: {"key": List([Bytes(b"nosdjkghsdjghsdkghj")])}, query_values: Some({"nosdjkghsdjghsdkghj": None}), projection: None, query_type: Write, ast: Some(Commands(List([Bytes(b"GET"), Bytes(b"nosdjkghsdjghsdkghj")]))) }), modified: false, original: Redis(Array([BulkString([71, 69, 84]), BulkString([110, 111, 115, 100, 106, 107, 103, 104, 115, 100, 106, 103, 104, 115, 100, 107, 103, 104, 106])])) }] }
[2mSep 24 16:56:13.173[0m [35mTRACE[0m shotover_proxy::transforms::redis_transforms::redis_cluster: Building pipelined query [Message { details: Query(QueryMessage { query_string: "GET nosdjkghsdjghsdkghj", namespace: [], primary_key: {"key": List([Bytes(b"nosdjkghsdjghsdkghj")])}, query_values: Some({"nosdjkghsdjghsdkghj": None}), projection: None, query_type: Write, ast: Some(Commands(List([Bytes(b"GET"), Bytes(b"nosdjkghsdjghsdkghj")]))) }), modified: false, original: Redis(Array([BulkString([71, 69, 84]), BulkString([110, 111, 115, 100, 106, 107, 103, 104, 115, 100, 106, 103, 104, 115, 100, 107, 103, 104, 106])])) }]
[2mSep 24 16:56:13.173[0m [35mTRACE[0m mio::poll: registering with poller    
[2mSep 24 16:56:13.174[0m [35mTRACE[0m mio::sys::unix::kqueue: registering; token=Token(34359738371); interests=Readable | Writable | Error | Hup    
[2mSep 24 16:56:14.196[0m [35mTRACE[0m mio::poll: deregistering handle with poller    
[2mSep 24 16:56:14.197[0m [35mTRACE[0m shotover_proxy::transforms::redis_transforms::redis_cluster: error=Connection refused (os error 61)
[2mSep 24 16:56:14.197[0m [31mERROR[0m shotover_proxy::server: chain processing error - Got connection error with cluster Connection refused (os error 61)
[2mSep 24 16:56:14.197[0m [35mTRACE[0m shotover_proxy::server: Waiting for message
[2mSep 24 16:56:14.197[0m [35mTRACE[0m tokio_util::codec::framed_read: attempting to decode a frame    
[2mSep 24 16:56:14.197[0m [35mTRACE[0m shotover_proxy::protocols::redis_codec: frames [] - remaining 0
